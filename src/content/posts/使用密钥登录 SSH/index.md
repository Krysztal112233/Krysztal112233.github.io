---
title: 使用密钥登录 SSH
date: 2024-01-31 00:52:00
tags:
    - 实用
    - 笔记
---

使用密钥登录远程服务器应该是最安全方便的操作，没有密钥对的私匙谁都不能上你的服务器。就算是暴力破解也不行。

<!-- more -->

但是，一定要记住，root 的密码无论如何也要是强密码。

## 准备过程

首先确认你的计算机里有没有 SSH Key，如果有的话直接用就好，不需要再次生成(假设用 ED25519 算法，如果是 RSA 算法把 `ed25519` 改成 `rsa` 就好)

```shell
cat ~/.ssh/id_ed25519.pub
```

如果是空的话就需要做下一步，如果不是的话就执行如下命令并且跳过下一步。

```shell
xclip -sel clip < ~/.ssh/id_ed25519.pub
```

这条命令的意思是把输出的东西传送到剪贴板里，Linux 很神奇罢！

## 生成密钥对

TODO

## 配置远程服务器允许使用密钥登录

登录到远程服务器，并且打开 `/etc/ssh/sshd_config` 文件，把如下内容的注释去掉

```txt
...
PubkeyAuthentication yes
...
```

然后打开 `.ssh/authorized_keys` 这个文件，把剪切板里的东西复制进去，大功告成

## 后记

- `.ssh/` 的权限必须是 `700`
- `.ssh/authorized_keys` 的权限必须是 `600`
