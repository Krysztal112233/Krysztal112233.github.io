---
title: MicroOS：进阶
date: 2023-06-12 18:20:19
tags:
  - 运维
  - MicroOS
---

知道了 MicroOS 的基本理念，那么就该用这些基本理念构建服务了。

<!-- more -->

## 运行服务

对于服务的运行，在 MicroOS 上更倾向使用容器方案，但是如果你要使用 `Systemd` 也是可以的，毕竟 MicroOS 只是保证了系统的事务性，只要有办法持久化数据即可.

对于这一点，你需要一些容器编排软件，比如说:

- K8S
- Docker Compose
- Podman

当然，就算是用这些东西，也要注意整个系统是事务化的，需要用新的快照来保存。

## 数据持久化

对于数据持久化，这是一个重头戏，从各种意义上来讲使用了 MicroOS 的服务器并不适合持久化储存数据，而你需要为你的 MicroOS 服务器配备一些能帮助他储存的东西，比如说 NFS.

### NFS

这是我最推荐的方式，只要配置好 MicroOS 的 NFS 自动挂载，保证 NFS 主机不会宕机，那么基本上可以保证万全.

记住，你得好好配置 NFS 的权限和设置，不然的话越权访问了你的 MicroOS 就会互相感染._即使它们会自动恢复，但是数据无价_

### FTP

非常不推荐，有这个想法可以直接跳过了.

## 系统升级

忘记我重复提起的所谓事务性了吗？也就是说升级系统是一件事务，你需要在新的快照层上进行更改。

意思是实际上需要以下步骤：

- 创建新的事务
- 执行软件包更新
- 保存事务
- 重启，验证是否正常工作（HealthCheck）

## 结语

这只是个非常非常细碎的笔记，其实记录到这里已经差不多了。关于系统的缩放性这不是我能讲的，权当是我自己的笔记罢了
